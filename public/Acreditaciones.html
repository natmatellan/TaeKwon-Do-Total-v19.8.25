<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Acreditaciones - Combate Total</title>
  <style>
    body {
      background: #121212;
      font-family: sans-serif;
      color: #f5f5f5;
      margin: 0;
      padding: 2rem;
    }

    h1 {
      text-align: center;
      color: #39ff14;
      text-shadow: 0 0 10px #39ff14;
    }

    .resumen {
      text-align: center;
      margin-bottom: 1rem;
      font-size: 1.2rem;
    }

    .buscador {
      text-align: center;
      margin-bottom: 1rem;
    }

    .buscador input {
      padding: 0.5rem;
      font-size: 1rem;
      width: 300px;
      border-radius: 5px;
      border: none;
      outline: none;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 1rem;
    }

    th, td {
      border: 1px solid #333;
      padding: 0.5rem;
      text-align: center;
    }

    th {
      background: #222;
      color: #39ff14;
    }

    tr.acreditado {
      background-color: rgba(57, 255, 20, 0.1);
      color: #9ccc65;
    }

    button {
      padding: 0.4rem 0.7rem;
      background: #39ff14;
      color: #000;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-weight: bold;
    }

    button:disabled {
      background: #666;
      color: #aaa;
      cursor: not-allowed;
    }

    select {
      padding: 0.3rem;
      border-radius: 5px;
    }

    td[contenteditable="true"] {
      background-color: #1c1c1c;
      outline: none;
    }

.contenedor-areas {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 40px 0px; /* alto, ancho - más espacio entre cajas */
  justify-items: center;
  margin-top: 40px;
}

.area-container {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
}

@media (max-width: 1000px) {
  .contenedor-areas {
    grid-template-columns: repeat(2, 1fr);
  }
}
@media (max-width: 600px) {
  .contenedor-areas {
    grid-template-columns: 1fr;
  }
}


.area-box {
  width: 120px;
  height: 120px;
  border: 4px solid red;
  background: #1565c0;
  box-shadow: inset 0 0 0 4px #c62828;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  font-size: 1.5rem;
  color: white;
}

.area-list {
  list-style: none;
  padding: 0;
  margin: 10px 0 0;
  font-size: 0.9rem;
  color: #fff;
  text-align: left;
}
.area-list li {
  margin: 3px 0;
  text-shadow: 0 0 2px #000;
}


.area-container.has-people .area-box {
  box-shadow: 0 0 18px rgba(57,255,20,.45), inset 0 0 0 4px #2e7d32;
  border-color: #39ff14;
}


td.locked {
  background-color: #181818 !important;
  color: #aaa !important;
  text-shadow: none !important;
}

td.invalid {
  outline: 2px solid #e57373;
  background: #2a1515 !important;
}

.area-container.has-people .area-box {
  box-shadow: 0 0 18px rgba(57,255,20,.45), inset 0 0 0 4px #2e7d32;
  border-color: #39ff14;
}


/* Colores por acción */
button[data-action="acreditar"] {
  background: #39ff14;
  color: #000;
}
button[data-action="acreditar"]:hover {
  filter: brightness(0.9);
}

button[data-action="desacreditar"] {
  background: #e53935; /* rojo */
  color: #fff;
}
button[data-action="desacreditar"]:hover {
  filter: brightness(0.95);
}

/* Caja de área con stats */
.area-box {
  position: relative;
  width: 160px;
  min-height: 160px;
  border: 4px solid red;
  background: #1565c0;
  box-shadow: inset 0 0 0 4px #c62828;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: .35rem;
  font-weight: bold;
  font-size: 1.1rem;
  color: white;
  padding: .6rem;
  border-radius: 10px;
}

.area-title {
  font-size: 1.1rem;
  text-shadow: 0 0 6px rgba(0,0,0,.5);
}

.area-meta {
  font-size: .9rem;
  font-weight: 600;
  line-height: 1.15;
  text-align: center;
}

.area-meta .muted {
  font-weight: 400;
  opacity: .85;
}

.area-container .start-btn {
  margin-top: .25rem;
  padding: .35rem .55rem;
  border-radius: 8px;
  font-size: .9rem;
  font-weight: 700;
  background: #39ff14;
  color: #000;
  border: none;
  cursor: pointer;
}
.area-container .start-btn:hover {
  filter: brightness(.92);
}

/* Glow cuando hay gente en el área */
.area-container.has-people .area-box {
  box-shadow: 0 0 18px rgba(57,255,20,.45), inset 0 0 0 4px #2e7d32;
  border-color: #39ff14;
}


.sort-btn {
  background: none;
  border: none;
  color: #39ff14;
  cursor: pointer;
  font-size: 0.85rem;
  padding: 0;
  margin-left: 4px;
}
.sort-btn:hover {
  color: #fff;
}


  </style>
</head>
<body>

<div style="text-align: center; margin-bottom: 1rem;">
  <button onclick="mostrarSeccion('acreditaciones')">Acreditaciones</button>
  <button onclick="mostrarSeccion('areas')">Áreas</button>
</div>

<div id="acreditaciones-section">
  <h1>Acreditaciones</h1>

  <div class="resumen" id="resumen">Acreditados: 0 / 0</div>

<div style="text-align: center; margin-bottom: 1rem;">
  <button onclick="importarDesdeSpreadsheet()">Importar desde Google Sheets</button>
  <button onclick="exportarCSV()">Exportar CSV (acreditados)</button>
</div>


  <div class="buscador">
    <input type="text" id="busqueda" placeholder="Buscar por nombre, coach, equipo...">
  </div>

  <table id="tabla">
    <thead>
      <tr>
        <th>N° <button class="sort-btn" data-field="id">↕</button></th>
        <th>Nombre y apellido <button class="sort-btn" data-field="nombre">↕</button></th>
        <th>Peso <button class="sort-btn" data-field="peso">↕</button></th>
        <th>Altura <button class="sort-btn" data-field="altura">↕</button></th>
        <th>HdS <button class="sort-btn" data-field="hds">↕</button></th>
        <th>PdR <button class="sort-btn" data-field="pdr">↕</button></th>
        <th>Coach <button class="sort-btn" data-field="coach">↕</button></th>
        <th>N° de Área <button class="sort-btn" data-field="area">↕</button></th>
        <th>Acreditar</th>
      </tr>
    </thead>

    <tbody id="tbody">
      <!-- Filas generadas dinámicamente -->
    </tbody>
  </table>
</div>





<div id="areas-section" style="display:none; text-align:center;">
  <h2>Áreas de Competencia</h2>

  <div class="contenedor-areas">
    <!-- Repetimos 8 áreas -->
    <div class="area-container" data-area="1">
      <div class="area-box">
        <div class="area-title">Área 1</div>
        <div class="area-meta">
          <div><span class="muted">Competidores:</span> <span id="area-count-1">0</span></div>
          <div><span class="muted">Peso:</span> <span id="area-range-1">—</span></div>
        </div>
        <button class="start-btn" data-area="1">Start Games</button>
      </div>
    </div>

    <div class="area-container" data-area="2">
      <div class="area-box">
        <div class="area-title">Área 2</div>
        <div class="area-meta">
          <div><span class="muted">Competidores:</span> <span id="area-count-2">0</span></div>
          <div><span class="muted">Peso:</span> <span id="area-range-2">—</span></div>
        </div>
        <button class="start-btn" data-area="2">Start Games</button>
      </div>
    </div>

    <div class="area-container" data-area="3">
      <div class="area-box">
        <div class="area-title">Área 3</div>
        <div class="area-meta">
          <div><span class="muted">Competidores:</span> <span id="area-count-3">0</span></div>
          <div><span class="muted">Peso:</span> <span id="area-range-3">—</span></div>
        </div>
        <button class="start-btn" data-area="3">Start Games</button>
      </div>
    </div>

    <div class="area-container" data-area="4">
      <div class="area-box">
        <div class="area-title">Área 4</div>
        <div class="area-meta">
          <div><span class="muted">Competidores:</span> <span id="area-count-4">0</span></div>
          <div><span class="muted">Peso:</span> <span id="area-range-4">—</span></div>
        </div>
        <button class="start-btn" data-area="4">Start Games</button>
      </div>
    </div>

    <div class="area-container" data-area="5">
      <div class="area-box">
        <div class="area-title">Área 5</div>
        <div class="area-meta">
          <div><span class="muted">Competidores:</span> <span id="area-count-5">0</span></div>
          <div><span class="muted">Peso:</span> <span id="area-range-5">—</span></div>
        </div>
        <button class="start-btn" data-area="5">Start Games</button>
      </div>
    </div>

    <div class="area-container" data-area="6">
      <div class="area-box">
        <div class="area-title">Área 6</div>
        <div class="area-meta">
          <div><span class="muted">Competidores:</span> <span id="area-count-6">0</span></div>
          <div><span class="muted">Peso:</span> <span id="area-range-6">—</span></div>
        </div>
        <button class="start-btn" data-area="6">Start Games</button>
      </div>
    </div>

    <div class="area-container" data-area="7">
      <div class="area-box">
        <div class="area-title">Área 7</div>
        <div class="area-meta">
          <div><span class="muted">Competidores:</span> <span id="area-count-7">0</span></div>
          <div><span class="muted">Peso:</span> <span id="area-range-7">—</span></div>
        </div>
        <button class="start-btn" data-area="7">Start Games</button>
      </div>
    </div>

    <div class="area-container" data-area="8">
      <div class="area-box">
        <div class="area-title">Área 8</div>
        <div class="area-meta">
          <div><span class="muted">Competidores:</span> <span id="area-count-8">0</span></div>
          <div><span class="muted">Peso:</span> <span id="area-range-8">—</span></div>
        </div>
        <button class="start-btn" data-area="8">Start Games</button>
      </div>
    </div>
  </div>
</div>




 <script>
  const STORAGE_KEY = "ct_acreditaciones_v1";
  const competidores = [];

  const tbody = document.getElementById("tbody");
  const resumen = document.getElementById("resumen");
  const busqueda = document.getElementById("busqueda");

  // --------- Persistencia ----------
  function guardar() {
    localStorage.setItem(STORAGE_KEY, JSON.stringify(competidores));
    pintarEstadoAreas();
  }

  function cargar() {
    const raw = localStorage.getItem(STORAGE_KEY);
    if (!raw) return;
    try {
      const arr = JSON.parse(raw);
      competidores.length = 0;
      for (const c of arr) competidores.push(c);
    } catch(e) {
      console.error("No se pudo cargar localStorage", e);
    }
  }

  // ---------- Utilidades ----------
  function clamp(n, min, max) { return Math.min(Math.max(n, min), max); }

  function validarYNormalizar(comp, field, val) {
    // Convierte a número cuando corresponde
    if (["peso","altura","hds","pdr"].includes(field)) {
      let num = parseFloat((val+"").replace(",", "."));
      if (Number.isNaN(num)) return { ok:false, fixed:comp[field] ?? "" };

      if (field === "peso") {
        num = clamp(num, 56, 90);
      }
      if (field === "altura") {
        num = clamp(num, 1.60, 1.95);
      }
      if (field === "hds") {
        // HdS depende de la altura actual (si no hay altura, asumimos 1.75 para no romper)
        const alt = parseFloat((comp.altura ?? 1.75));
        const min = +(alt * 1.2).toFixed(2);
        const max = +(alt * 1.8).toFixed(2);
        num = clamp(num, min, max);
      }
      if (field === "pdr") {
        num = clamp(num, 3.49, 5.24);
      }
      return { ok:true, fixed: +num.toFixed(2) };
    }

    // Campos de texto
    if (["nombre","coach"].includes(field)) {
      const limpio = (val+"").trim();
      return { ok:true, fixed: limpio };
    }

    if (field === "area") {
      const limpio = (val+"").trim();
      if (limpio === "") return { ok:true, fixed: "" };
      const n = parseInt(limpio, 10);
      if (!n || n < 1 || n > 8) return { ok:false, fixed: comp.area ?? "" };
      return { ok:true, fixed: String(n) };
    }

    return { ok:true, fixed: val };
  }

  function setCellEditable(cell, enabled) {
    if (enabled) {
      cell.setAttribute("contenteditable", "true");
      cell.classList.remove("locked");
    } else {
      cell.setAttribute("contenteditable", "false");
      cell.classList.add("locked");
    }
  }

  // ---------- Render tabla ----------
  function renderTabla(filtro = "") {
    tbody.innerHTML = "";
    let acreditados = 0;

    competidores.forEach((comp) => {
      const match = filtro === "" || Object.values({
        id: comp.id,
        nombre: comp.nombre,
        peso: comp.peso,
        altura: comp.altura,
        hds: comp.hds,
        pdr: comp.pdr,
        coach: comp.coach,
        area: comp.area || ""
      }).some(val => String(val ?? "").toLowerCase().includes(filtro.toLowerCase()));

      if (!match) return;

      const tr = document.createElement("tr");
      if (comp.acreditado) {
        tr.classList.add("acreditado");
        acreditados++;
      }
      tr.dataset.id = comp.id;

      const opcionesAreas = [...Array(8)].map((_, i) => {
        const val = String(i + 1);
        const selected = String(comp.area || "") === val ? "selected" : "";
        return `<option value="${val}" ${selected}>Área ${val}</option>`;
      }).join("");

      // Botones según estado
      const btns = comp.acreditado
        ? `<button data-action="desacreditar">Desacreditar</button>`
        : `<button data-action="acreditar">Acreditar</button>`;

      tr.innerHTML = `
        <td>${comp.id}</td>
        <td data-field="nombre">${comp.nombre}</td>
        <td data-field="peso">${comp.peso}</td>
        <td data-field="altura">${comp.altura}</td>
        <td data-field="hds">${comp.hds}</td>
        <td data-field="pdr">${comp.pdr}</td>
        <td data-field="coach">${comp.coach}</td>
        <td>
          <select data-field="area" ${comp.acreditado ? "disabled" : ""}>
            <option value="">-</option>
            ${opcionesAreas}
          </select>
        </td>
        <td>${btns}</td>
      `;

      // Contenteditable segun estado
      const editable = !comp.acreditado;
      tr.querySelectorAll("td[data-field]").forEach(td => setCellEditable(td, editable));

      tbody.appendChild(tr);
    });

    resumen.textContent = `Acreditados: ${acreditados} / ${competidores.length}`;
    pintarEstadoAreas(); // actualiza estados visuales
  }

  // ---------- Acreditar / Desacreditar ----------
  function acreditar(id) {
    const comp = competidores.find(c => c.id === id);
    if (!comp) return;

    if (!comp.area) {
      alert("Seleccioná un N° de Área antes de acreditar.");
      return;
    }

    comp.acreditado = true;
    guardar();
    renderTabla(busqueda.value);
  }

  function desacreditar(id) {
    const comp = competidores.find(c => c.id === id);
    if (!comp) return;

    comp.acreditado = false;
    // Lo removemos de su lista visual
    guardar();
    renderTabla(busqueda.value);
  }

  // ---------- Areas ----------
  function agregarAListaDeArea(comp) {
    const ul = document.getElementById(`lista-area-${comp.area}`);
    if (!ul) return;
    const li = document.createElement("li");
    // Si tus alturas están en m, podés mostrar "m" directamente.
    li.textContent = `${comp.nombre} - ${comp.peso} kg - ${comp.altura} m`;
    ul.appendChild(li);
  }

  function limpiarListasAreas() {
    for (let i = 1; i <= 8; i++) {
      const ul = document.getElementById(`lista-area-${i}`);
      if (ul) ul.innerHTML = "";
    }
  }

  function reconstruirListasDesdeDatos() {
    limpiarListasAreas();
    for (const comp of competidores) {
      if (comp.acreditado && comp.area) agregarAListaDeArea(comp);
    }
  }

function pintarEstadoAreas() {
  for (let i = 1; i <= 8; i++) {
    const list = competidores.filter(c => c.acreditado && String(c.area) === String(i));

    // cantidad
    const countEl = document.getElementById(`area-count-${i}`);
    if (countEl) countEl.textContent = list.length;

    // rango de peso
    const pesos = list
      .map(c => parseFloat(c.peso))
      .filter(n => Number.isFinite(n));
    const rangeEl = document.getElementById(`area-range-${i}`);
    if (rangeEl) {
      if (pesos.length === 0) {
        rangeEl.textContent = "—";
      } else {
        const min = Math.min(...pesos).toFixed(0);
        const max = Math.max(...pesos).toFixed(0);
        rangeEl.textContent = `${min}–${max} kg`;
      }
    }

    // Glow visual si tiene gente
    const wrap = document.querySelector(`.area-container[data-area="${i}"]`);
    if (wrap) {
      if (list.length > 0) wrap.classList.add("has-people");
      else wrap.classList.remove("has-people");
    }
  }
}

  // ---------- Buscador ----------
  busqueda.addEventListener("input", () => {
    renderTabla(busqueda.value);
  });

  // ---------- Delegación de eventos ----------
  // Edición inline (solo cuando no está acreditado)
  tbody.addEventListener("blur", (e) => {
    const cell = e.target.closest("td[data-field]");
    if (!cell) return;

    const tr = e.target.closest("tr");
    const id = Number(tr.dataset.id);
    const comp = competidores.find(c => c.id === id);
    if (!comp) return;

    if (comp.acreditado) return; // bloqueado

    const field = cell.dataset.field;
    const raw = cell.textContent.trim();

    const { ok, fixed } = validarYNormalizar(comp, field, raw);
    if (!ok) {
      cell.classList.add("invalid");
      // revertimos visualmente
      cell.textContent = comp[field] ?? "";
      setTimeout(() => cell.classList.remove("invalid"), 1200);
      return;
    }

    // Si cambia altura, podemos chequear HdS y ajustarlo al rango válido
    if (field === "altura") {
      comp.altura = fixed;
      // Reajustamos HdS si quedó fuera de rango
      const minH = +(comp.altura * 1.2).toFixed(2);
      const maxH = +(comp.altura * 1.8).toFixed(2);
      let h = parseFloat(comp.hds);
      if (!isFinite(h)) h = minH;
      if (h < minH || h > maxH) comp.hds = clamp(h, minH, maxH).toFixed(2);
    } else {
      comp[field] = fixed;
    }

    guardar();
    // refrescamos solo la fila? por simpleza, render general
    renderTabla(busqueda.value);
  }, true);

  tbody.addEventListener("change", (e) => {
    const select = e.target.closest("select[data-field='area']");
    if (!select) return;
    const tr = e.target.closest("tr");
    const id = Number(tr.dataset.id);
    const comp = competidores.find(c => c.id === id);
    if (!comp) return;

    if (comp.acreditado) { // bloqueado
      // fuerza a volver al valor previo
      select.value = comp.area || "";
      return;
    }

    const { ok, fixed } = validarYNormalizar(comp, "area", select.value);
    if (!ok) {
      select.value = comp.area || "";
      return;
    }
    comp.area = fixed;
    guardar();
  });

  tbody.addEventListener("click", (e) => {
    const tr = e.target.closest("tr");
    if (!tr) return;
    const id = Number(tr.dataset.id);

    if (e.target.closest("button[data-action='acreditar']")) {
      acreditar(id);
      return;
    }
    if (e.target.closest("button[data-action='desacreditar']")) {
      desacreditar(id);
      return;
    }
  });

  // ---------- Navegación de secciones ----------
  function mostrarSeccion(id) {
    document.getElementById("acreditaciones-section").style.display = id === "acreditaciones" ? "block" : "none";
    document.getElementById("areas-section").style.display = id === "areas" ? "block" : "none";
  }
  window.mostrarSeccion = mostrarSeccion;

  // ---------- Importar desde Google Sheets ----------
  async function importarDesdeSpreadsheet() {
    const sheetURL = prompt("Pegá el link de tu Google Spreadsheet (modo público):");
    if (!sheetURL) return;

    const match = sheetURL.match(/spreadsheets\/d\/([a-zA-Z0-9-_]+)/);
    if (!match) {
      alert("URL inválida");
      return;
    }

    const sheetId = match[1];
    const url = `https://opensheet.vercel.app/${sheetId}/Hoja1`;

    try {
      const res = await fetch(url);
      const datos = await res.json();

      competidores.length = 0;
      datos.forEach((fila, i) => {
        // Normalizamos a número cuando aplica
        const peso = parseFloat((fila["Peso"] ?? "").toString().replace(",", ".")) || "";
        const altura = parseFloat((fila["Altura"] ?? "").toString().replace(",", ".")) || "";
        const hds = parseFloat((fila["HdS"] ?? "").toString().replace(",", ".")) || "";
        const pdr = parseFloat((fila["PdR"] ?? "").toString().replace(",", ".")) || "";

        competidores.push({
          id: parseInt(fila["N°"]) || i + 1,
          nombre: fila["Nombre y apellido"] ?? "",
          peso: peso,
          altura: altura,
          hds: hds,
          pdr: pdr,
          coach: fila["Coach"] ?? "",
          acreditado: false,
          area: ""
        });
      });

      guardar();
      renderTabla();
      alert("Datos importados con éxito");
    } catch (e) {
      console.error("Error al cargar datos", e);
      alert("Error al importar. Verificá el enlace y que la hoja sea pública.");
    }
  }
  window.importarDesdeSpreadsheet = importarDesdeSpreadsheet;

  // ---------- Exportar CSV (solo acreditados) ----------
  function exportarCSV() {
    const acreditados = competidores.filter(c => c.acreditado);
    if (acreditados.length === 0) {
      alert("No hay acreditados para exportar.");
      return;
    }
    let csv = "N°,Nombre y apellido,Peso,Altura,HdS,PdR,Coach,Area\n";
    for (const c of acreditados) {
      csv += [
        c.id,
        `"${(c.nombre ?? "").replace(/"/g, '""')}"`,
        c.peso ?? "",
        c.altura ?? "",
        c.hds ?? "",
        c.pdr ?? "",
        `"${(c.coach ?? "").replace(/"/g, '""')}"`,
        c.area ?? ""
      ].join(",") + "\n";
    }

    const blob = new Blob([csv], { type: "text/csv" });
    const url = URL.createObjectURL(blob);
    const a = document.createElement("a");
    a.href = url;
    a.download = "acreditados.csv";
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    setTimeout(() => URL.revokeObjectURL(url), 1000);
  }
  window.exportarCSV = exportarCSV;

let sortConfig = { field: null, direction: null };

document.querySelector("thead").addEventListener("click", (e) => {
  const btn = e.target.closest(".sort-btn");
  if (!btn) return;

  const field = btn.dataset.field;

  // Alterna: null -> asc -> desc -> null
  if (sortConfig.field !== field) {
    sortConfig = { field, direction: "asc" };
  } else if (sortConfig.direction === "asc") {
    sortConfig.direction = "desc";
  } else if (sortConfig.direction === "desc") {
    sortConfig = { field: null, direction: null };
  }

  ordenarCompetidores(sortConfig.field, sortConfig.direction);
  renderTabla(busqueda.value);
});




function ordenarCompetidores(field, direction) {
  // Estado "sin ordenar": volvemos al orden base por ID asc
  if (!field || !direction) {
    competidores.sort((a, b) => (Number(a.id) || 0) - (Number(b.id) || 0));
    return;
  }

  const numericFields = new Set(["id","peso","altura","hds","pdr","area"]);

  const getVal = (obj) => {
    const v = obj[field];
    if (numericFields.has(field)) return parseFloat(v);
    return String(v ?? "");
  };

  competidores.sort((a, b) => {
    let va = getVal(a);
    let vb = getVal(b);

    // comparar números o strings según corresponda
    let cmp;
    if (numericFields.has(field)) {
      const na = Number.isFinite(va) ? va : -Infinity;
      const nb = Number.isFinite(vb) ? vb : -Infinity;
      cmp = na - nb;
    } else {
      cmp = va.localeCompare(vb, "es", { numeric: true, sensitivity: "base" });
    }

    return direction === "asc" ? cmp : -cmp;
  });
}


document.querySelector("thead").addEventListener("click", (e) => {
  const btn = e.target.closest(".sort-btn");
  if (!btn) return;

  const field = btn.dataset.field;

  // Alternar estados: null -> asc -> desc -> null
  if (sortConfig.field !== field) {
    sortConfig = { field, direction: "asc" };
  } else if (sortConfig.direction === "asc") {
    sortConfig.direction = "desc";
  } else if (sortConfig.direction === "desc") {
    sortConfig = { field: null, direction: null };
  }

  ordenarCompetidores(sortConfig.field, sortConfig.direction);
  renderTabla(busqueda.value);
});


  // ---------- Boot ----------
  cargar();
  renderTabla();
  reconstruirListasDesdeDatos();


  // Start Games por área
document.querySelector("#areas-section")?.addEventListener("click", (e) => {
  const btn = e.target.closest(".start-btn");
  if (!btn) return;
  const area = btn.dataset.area;
  // si el archivo se llama start-games.html y está en la misma carpeta:
  const url = `start-games.html?area=${encodeURIComponent(area)}`;

  // Opción A: nueva pestaña
  const win = window.open(url, "_blank");
  if (!win) {
    // Si el navegador bloqueó el popup, usar fallback en la misma pestaña:
    window.location.href = url;
  }
});

</script>



</body>
</html>
